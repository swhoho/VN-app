# 변경 로그

이 프로젝트의 주요 변경사항을 기록합니다.

## [v3.0.0] - 2024-12-15

### ⚡ 주요 변경사항 (Breaking Changes)
- **Supabase 통합**: Google OAuth에서 Supabase Auth로 인증 시스템 마이그레이션
  - JWT 토큰 기반 인증으로 전환
  - 기존 세션 기반 인증 시스템 단계적 제거 예정
  - 사용자 프로필 데이터베이스 PostgreSQL로 마이그레이션

- **UGC 플랫폼 기능**: 사용자 생성 콘텐츠 플랫폼으로 확장
  - Canvas 페이지: 사용자 업로드 콘텐츠 갤러리
  - Upload VN 페이지: 비주얼 노벨 업로드 종합 시스템
  - 콘텐츠 등급 시스템 및 에피소드 관리

### ✨ 새로운 기능
- **Canvas 갤러리**: 사용자 생성 콘텐츠 전용 갤러리 페이지
  - 3열 반응형 그리드 레이아웃
  - Framer Motion 애니메이션 효과
  - Floating Action Button으로 업로드 연결
  - React Query 기반 데이터 페칭 및 캐싱

- **비주얼 노벨 업로드 시스템**: 포괄적인 콘텐츠 업로드 인터페이스
  - 썸네일 업로드 (정사각형/세로형 지원)
  - 콘텐츠 등급 시스템 (폭력성, 노출, 성적 콘텐츠, 언어)
  - 다중 에피소드 관리
  - 드래그 앤 드롭 파일 업로드
  - 외부 링크 연결 지원

- **새로운 API 엔드포인트**:
  - `GET /api/canvas-items`: 캔버스 아이템 전용 조회
  - `GET /api/my-page/stats`: Supabase 기반 사용자 통계
  - JWT 토큰 기반 인증 미들웨어

### 🔧 개선사항
- **보안 강화된 이미지 프록시**: 기존 이미지 프록시 시스템 대폭 강화
  - 도메인 화이트리스트 시스템 도입
  - Rate Limiting: IP당 시간당 100회 요청 제한
  - 파일 크기 제한 (최대 5MB)
  - HTTPS 강제 및 콘텐츠 타입 검증
  - 10초 요청 타임아웃 설정

- **SEO 최적화 시스템**: 검색 엔진 최적화를 위한 종합 시스템
  - SEOHead 컴포넌트: 동적 메타 태그 관리
  - StructuredData 컴포넌트: Schema.org 구조화된 데이터
  - Open Graph, Twitter Card 자동 생성
  - Canonical URL 설정

- **사용자 인증 시스템 개선**: Supabase 기반으로 완전히 재구축
  - 자동 프로필 생성 및 업데이트
  - Context API를 통한 전역 상태 관리
  - 세션 자동 복원 및 토큰 관리
  - 포괄적인 오류 처리

### 🎨 UI/UX 개선
- **새로운 서비스 폴더 구조**: 코드 구조 최적화
  - `services/apiService.ts`: JWT 토큰 기반 API 요청 헬퍼
  - `services/supabaseService.ts`: Supabase 데이터 조회/조작 서비스
  - `utils/imageProxy.ts`: 이미지 프록시 유틸리티

- **모바일 최적화**: 업로드 및 갤러리 페이지 모바일 UX 개선
  - 터치 친화적 인터페이스
  - 반응형 폼 레이아웃
  - 스텝별 업로드 프로세스

### 🔐 보안 및 성능
- **데이터베이스 구조 개선**: 
  - `canvas` 필드 추가로 일반/UGC 콘텐츠 구분
  - Profiles 테이블에 독서 통계 필드 추가
  - Supabase PostgreSQL 스키마 최적화

- **API 성능 최적화**:
  - 캔버스 아이템 전용 엔드포인트로 쿼리 최적화
  - Rate limiting 및 보안 헤더 강화
  - 이미지 프록시 캐싱 개선

### 📱 크로스 플랫폼 준비
- **React Native 확장성**: 컴포넌트 구조 React Native 호환성 고려
- **타입 안전성**: TypeScript 타입 시스템 전면 강화
- **모듈화**: 재사용 가능한 컴포넌트 및 훅 구조 개선

## [v2.1.0] - 2024-01-15

### ✨ 새로운 기능
- **드래그 스크롤 기능**: 홈페이지 장르 필터에 드래그 스크롤 기능 추가
  - 마우스 드래그 및 터치 제스처 지원
  - 모바일 친화적인 UX 개선
  - 스크롤 중 클릭 이벤트 방지 로직

- **타입 시스템 개선**: 프로젝트 전반의 타입 안전성 강화
  - 새로운 타입 정의 파일 추가 (`client/src/types/index.ts`)
  - 클라이언트-서버 간 타입 일관성 향상
  - Item 타입에서 tags 배열 파싱 로직 개선

### 🔧 개선사항
- **컴포넌트 최적화**: 여러 컴포넌트의 성능 및 사용성 개선
  - `novel-card.tsx`: 이미지 프록시 URL 처리 개선
  - `home.tsx`: 장르 필터 UI/UX 개선
  - `search.tsx`: 검색 결과 표시 최적화

- **인증 시스템 개선**: 사용자 인증 관련 로직 개선
  - `useAuth.ts`: 인증 상태 관리 최적화
  - `my-page.tsx`: 사용자 프로필 표시 개선

- **네비게이션 개선**: 페이지 간 이동 경험 향상
  - `novel-detail.tsx`: 상세 페이지 로딩 최적화
  - 라우팅 성능 개선

### 🐛 버그 수정
- 이미지 프록시 URL 처리 오류 수정
- 다국어 지원 시 일부 텍스트 누락 문제 해결
- 모바일 환경에서 터치 스크롤 간섭 문제 수정

### 📱 모바일 최적화
- 터치 제스처 응답성 개선
- 모바일 브라우저 호환성 향상
- 반응형 레이아웃 미세 조정

## [v2.0.0] - 2024-01-01

### ⚡ 주요 변경사항
- **다국어 지원**: 15개 언어 지원 시스템 구축
  - 한국어, 영어, 일본어, 중국어(간체/번체)
  - 스페인어, 프랑스어, 독일어, 이탈리아어, 포르투갈어
  - 러시아어, 아랍어, 힌디어, 태국어, 베트남어
  - 동적 언어 전환 및 로컬 스토리지 지속성

- **Google OAuth 2.0 인증**: 안전한 소셜 로그인 시스템
  - Passport.js 기반 인증 구현
  - 세션 기반 사용자 상태 관리
  - 보호된 라우트 미들웨어

- **반응형 UI 시스템**: 모바일 우선 설계
  - Tailwind CSS 기반 반응형 디자인
  - 모바일/데스크톱 적응형 레이아웃
  - 터치 친화적 인터페이스

### 🎨 UI/UX 개선
- **Shadcn/ui 컴포넌트**: 40개 이상의 접근성 중심 UI 컴포넌트
- **다크 모드 지원**: 시스템 테마 연동
- **하단 네비게이션**: 모바일 친화적 네비게이션 바
- **언어 선택기**: 국기 이모지와 함께 직관적인 언어 선택

### 🔧 백엔드 아키텍처
- **Express.js 서버**: TypeScript 기반 백엔드
- **SQLite + Drizzle ORM**: 타입 안전한 데이터베이스 연결
- **이미지 프록시**: CORS 해결을 위한 이미지 프록시 서비스
- **보안 강화**: Helmet, CORS, 요청 속도 제한

### 📊 데이터 모델
- **사용자 프로필**: 멤버십, 포인트, 독서 통계
- **비주얼 노벨**: 다국어 제목/설명, 태그 시스템
- **랭킹 시스템**: 주간 조회수 기반 랭킹
- **포인트 시스템**: 구매 패키지 및 결제 내역

## [v1.5.0] - 2023-12-15

### ✨ 새로운 기능
- **검색 기능**: 실시간 검색 및 필터링
- **랭킹 시스템**: 인기 순위 표시
- **사용자 대시보드**: 개인 통계 및 설정

### 🔧 개선사항
- **성능 최적화**: React Query 캐싱 도입
- **코드 분할**: 페이지별 지연 로딩
- **번들 크기 최적화**: 불필요한 의존성 제거

## [v1.0.0] - 2023-12-01

### 🎉 초기 릴리스
- **비주얼 노벨 플랫폼**: 기본 웹 애플리케이션 구조
- **React 18**: 현대적인 React 기반 프론트엔드
- **TypeScript**: 타입 안전성 확보
- **Vite**: 빠른 개발 환경 구축

### 📚 기본 기능
- **홈페이지**: 비주얼 노벨 목록 표시
- **상세 페이지**: 각 노벨의 정보 표시
- **기본 네비게이션**: 페이지 간 이동

### 🛠 개발 환경
- **ESLint + Prettier**: 코드 품질 관리
- **TypeScript 설정**: 엄격한 타입 체크
- **개발 서버**: 핫 모듈 교체 지원

---

## 🔄 업데이트 규칙

### 버전 번호 체계
이 프로젝트는 [Semantic Versioning](https://semver.org/) 규칙을 따릅니다:

- **Major (x.0.0)**: 호환성을 깨뜨리는 변경사항
- **Minor (0.x.0)**: 새로운 기능 추가 (하위 호환성 유지)
- **Patch (0.0.x)**: 버그 수정 (하위 호환성 유지)

### 변경사항 분류
- **✨ 새로운 기능**: 새로운 기능 추가
- **🔧 개선사항**: 기존 기능 개선
- **🐛 버그 수정**: 버그 및 오류 수정
- **📱 모바일**: 모바일 관련 개선
- **🎨 UI/UX**: 사용자 인터페이스 개선
- **⚡ 성능**: 성능 최적화
- **🔐 보안**: 보안 관련 변경
- **📚 문서**: 문서 관련 변경
- **🧪 테스트**: 테스트 관련 변경
- **🔄 리팩토링**: 코드 리팩토링

### 호환성 주의사항
- **v3.0.0**: Supabase 통합으로 인한 인증 시스템 변경 (JWT 토큰 기반)
- **v3.0.0**: UGC 플랫폼 기능 추가로 인한 데이터베이스 스키마 변경
- **v2.0.0**: 다국어 지원 시스템 도입으로 인한 API 변경
- **v1.5.0**: React Query 도입으로 인한 상태 관리 변경

---

## 📋 현재 알려진 이슈

### 해결 예정 이슈
1. **레거시 인증 시스템**: Google OAuth 세션 기반 인증 완전 제거 예정
2. **파일 업로드 최적화**: 대용량 파일 청크 업로드 시스템 필요
3. **접근성**: 키보드 네비게이션 및 스크린 리더 최적화 필요
4. **에러 핸들링**: 업로드 실패 시 복구 메커니즘 개선

### 향후 계획 (v3.1.0 이후)
1. **실시간 기능**: WebSocket 기반 실시간 댓글 및 알림
2. **소셜 기능**: 사용자 팔로우, 댓글, 리뷰 시스템
3. **AI 추천**: 머신러닝 기반 콘텐츠 추천 시스템
4. **모바일 앱**: React Native 기반 iOS/Android 앱
5. **결제 시스템**: Stripe 연동 포인트 구매 기능
6. **PWA 기능**: 오프라인 지원 및 푸시 알림
7. **콘텐츠 관리**: 사용자 신고 및 관리자 모더레이션 시스템

---

## 📞 기여 가이드

### 버그 리포트
버그를 발견하셨나요? [GitHub Issues](https://github.com/your-repo/issues)에 다음 정보와 함께 리포트해주세요:
- 버그 설명
- 재현 단계
- 예상 결과
- 실제 결과
- 브라우저 및 버전 정보

### 기능 요청
새로운 기능을 제안하고 싶으시다면:
- 기능 설명
- 사용 사례
- 우선순위
- 구현 제안 (선택사항)

### 코드 기여
코드 기여를 원하시는 경우:
1. 이슈 생성 또는 기존 이슈 확인
2. 브랜치 생성 (`feature/기능명` 또는 `bugfix/버그명`)
3. 변경사항 구현
4. 테스트 확인
5. Pull Request 생성

---

이 변경 로그는 프로젝트의 발전 과정을 투명하게 공개하고, 사용자와 개발자들이 변경사항을 쉽게 파악할 수 있도록 도와줍니다.